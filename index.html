<title>XSS</title>
<h1>WARNING: if you continue you will XSS yourself</h1>
<script>
"use strict";
// Origin must be sandboxed and not in a iframe
if (window.origin === "null" && window.opener === null && window.top === window && window.parent === window) {
  // Clean URL
  window.history.replaceState("", "", "?html=" + new URL(location.href).searchParams.get("html"));
  // Require user confirmation
  if(window.confirm("WARNING: if you continue you will XSS yourself") === true) {
    unsafe();
  } else {
    window.history.back();
  }
} else {
  // Used for sandbox
  navigator.serviceWorker.register("https://ndevtk.github.io/cross-site/sw.js").then(_ => {
    location = location;
  });
}

function unsafe() {
  // unsafe code to run code from url
  document.body.innerHTML = new URL(location.href).searchParams.get("html");
}
</script>
